# 套餐管理-折叠面板

![image-20250411110830947](./assets/image-20250411110830947.png)

```tsx
// 客户资料card1组件
@Component
struct packageCard1{
  @StorageLink('versionType') versionType: string = "";
  @Prop dataList: DatalistModel;

  @State isExpanded: boolean = false;
  @State isShowTitle: boolean = true;
  private displayCount: number = 3; // 默认显示条数
  @State panelData: typeItems[] = [
    {
      id: "1",
      title: "洗美、空调格",
      amount: 3
    },
    {
      id: "2",
      title: "硬件设备采购（服务器/网络设备）",
      amount: 2
    },
    {
      id: "3",
      title: "数据迁移服务费",
      amount: 5
    },
    {
      id: "4",
      title: "洗美、空调格",
      amount: 7.2
    },
  ];
  // 在组件类中定义模拟数据
  private detailList: typeItems[] = [
    {
      id: "1",
      title: "洗美、空调格",
      amount: 3
    },
    {
      id: "2",
      title: "硬件设备采购（服务器/网络设备）",
      amount: 2
    },
    {
      id: "3",
      title: "数据迁移服务费",
      amount: 5
    },
    {
      id: "4",
      title: "洗美、空调格",
      amount: 7.2
    },
    {
      id: "5",
      title: "UI/UX 设计优化服务 - 门户改版",
      amount:0
    },

  ];



  build() {
    Column() {
      Row() {
        BalanceItem({ label: '储值余额', value: this.dataList?.cardLeftMoney });
        if (this.versionType != 'MostEasy') {
          BalanceItem({ label: '专项余额', value: this.dataList?.leftWalletMoney });
        }
        BalanceItem({ label: '赠送余额', value: this.dataList?.cardGiftLeftMoney });
      }
      .width('100%')
      .justifyContent(FlexAlign.SpaceAround)

      Row() {
        Column() {
          // 数据列表容器
          Column() {
            if (this.isShowTitle) {
              Row()
              {
                Text('指定分类')
                  .fontSize(12)
                  .fontColor('#202020')
                  .textAlign(TextAlign.Center)
                  .layoutWeight(1)



                Text('折扣')
                  .fontSize(12)
                  .fontColor('#202020')
                  .textAlign(TextAlign.Center)
                  .margin({ left: 10 })
                  .width('20%')

              }
              .padding({ top: 9, bottom: 9, left: 12, right: 12 })
              .backgroundColor('#48D08E')
              .width('100%')
              .justifyContent(FlexAlign.Center)
            }


            ForEach(this.detailList.slice(0, this.isExpanded ? this.detailList.length : this.displayCount),
              (item: typeItems, index: number) => {
                Row()
                {
                  Text(item.title)
                    .fontSize(12)
                    .fontColor('#202020')
                    .textAlign(TextAlign.Center)
                    .textOverflow({ overflow: TextOverflow.Ellipsis })
                    .flexShrink(1) // 允许压缩
                    .layoutWeight(1)
                    .textAlign(TextAlign.Center)

                  Text(`${NumberFormatter.format(item.amount)}`)
                    .margin({ left: 10 })
                    .width('20%')
                    .fontSize(12)
                    .fontColor('#202020')
                    .textAlign(TextAlign.Center)
                }
                .padding({ top: 9, bottom: 9, left: 12, right: 12 })
                .backgroundColor(index % 2 === 0 ? '#FFFFFF' : '#ecfaf3')
                .width('100%')
                .justifyContent(FlexAlign.Center)

              })
          }
          .width('100%')


          // 展开/折叠控制
          if (this.detailList.length > this.displayCount) {
            Row(){
              Image(this.isExpanded ? $r('app.media.ic_svg_up') :  $r('app.media.ic_svg_down')).width(11).height(6.3)
              Text(this.isExpanded ? '收起' : '更多')
                .fontSize(12)
                .fontColor('#48D08E')

                .onClick(() => {
                  animateTo({ duration: 200 }, () => {
                    this.isExpanded = !this.isExpanded;
                  })
                })}.justifyContent(FlexAlign.SpaceAround).alignItems(VerticalAlign.Center).margin({ top: 13 })
          }
        }
        .width('100%')
      }
      .margin({ top: 15 })
    }
    .ColumnStyle()
  }

}
// 定义常量
const TITLE_FONT_SIZE = 12;
const VALUE_FONT_SIZE = 16;
const VALUE_FONT_COLOR = '#323232';

@Component
struct BalanceItem  {
  @Prop label: string;
  @Prop value: number;

  build() {
    Column() {
      Text(this.label).fontSize(TITLE_FONT_SIZE).fontColor('#777777');
      Text((this.value?? 0).toFixed(2)).fontSize(VALUE_FONT_SIZE).fontColor(VALUE_FONT_COLOR);
    }.justifyContent(FlexAlign.SpaceAround);
  }
}
```



